(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-419dd7cf"],{"1dc2":function(t,e,n){"use strict";var r=n("dd20"),a=n.n(r);a.a},"29a2":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.detail?n("section",{staticClass:"container"},[n("section",{staticClass:"content"},[n("h1",{staticClass:"article-title"},[t._v(t._s(t.detail.title))]),n("div",{staticClass:"article-info"},[t.detail.category_detail?n("p",{staticClass:"article-category"},[t._v(" "+t._s(t.detail.category_detail.name)+" ")]):t._e(),n("p",{staticClass:"article-author"},[n("i",{staticClass:"icon el-icon-user"}),t._v(" "+t._s(t.detail.author))]),n("p",{staticClass:"article-browse"},[n("i",{staticClass:"icon el-icon-view"}),t._v(" "+t._s(t.detail.browse))]),n("p",{staticClass:"article-browse"},[n("i",{staticClass:"icon el-icon-chat-dot-round"}),t._v(" "+t._s(t.detail.comments_list.data.length))]),n("p",{staticClass:"article-create-at"},[n("i",{staticClass:"icon el-icon-time"}),t._v(" "+t._s(t.detail.created_at))])]),n("div",{staticClass:"article-detail",attrs:{id:"article-detail"}},[n("mavon-editor",{staticStyle:{height:"100%"},attrs:{ishljs:!0,defaultOpen:"preview",editable:!1,subfield:!1,toolbarsFlag:!1},model:{value:t.detail.content,callback:function(e){t.$set(t.detail,"content",e)},expression:"detail.content"}})],1),n("div",{staticClass:"v-comments"},[n("v-comments",{attrs:{commentsList:t.detail.comments_list,id:t.id},on:{changeCommentsPage:t.changeCommentsPage,updateComments:t.updateComments}})],1)])]):t._e()},a=[],s=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("96cf"),n("89ba")),i=n("2fa7"),c=n("2f62"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("section",{staticClass:"comments-create"},[n("h1",{staticClass:"comments-title"},[t._v("欢迎评论")]),n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-position":"left","label-width":"50px"}},[n("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",maxlength:"6",placeholder:"请输入您的昵称"},model:{value:t.ruleForm.nickname,callback:function(e){t.$set(t.ruleForm,"nickname",e)},expression:"ruleForm.nickname"}})],1),n("el-form-item",{attrs:{label:"内容",prop:"content"}},[n("mavon-editor",{staticClass:"mavon-editor--box",attrs:{autofocus:!1,defaultOpen:"edit",placeholder:"请输入评论内容",ishljs:!0},model:{value:t.ruleForm.content,callback:function(e){t.$set(t.ruleForm,"content",e)},expression:"ruleForm.content"}})],1),n("el-form-item",[n("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交评论")])],1)],1)],1),t.commentsList&&t.commentsList.data.length>0?n("section",{staticClass:"comments-list"},[n("h1",{staticClass:"comments-title"},[t._v("评论列表")]),n("ul",{staticClass:"comments-box"},t._l(t.commentsList.data,(function(e,r){return n("li",{key:r,staticClass:"comments-item"},[n("div",{staticClass:"comments-item-username"},[n("i",{staticClass:"icon el-icon-chat-dot-round"}),t._v(" 来自「"+t._s(e.nickname)+"」的评论： ")]),n("div",{staticClass:"comments-item-content"},[n("mavon-editor",{staticStyle:{"min-height":"0",width:"100%"},attrs:{ishljs:!0,defaultOpen:"preview",editable:!1,subfield:!1,toolbarsFlag:!1},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}})],1)])})),0),t.commentsList&&t.commentsList.meta?n("section",{staticClass:"page"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-count":t.commentsList.meta.count,"current-page":t.commentsList.meta.current_page,total:t.commentsList.meta.total},on:{"current-change":t.changePage}})],1):t._e()]):t._e()])},l=[];function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(n,!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={props:["id","commentsList"],data:function(){var t=function(t,e,n){var r=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;""===e?n(new Error("请输入邮箱")):r.test(e)?n():n(new Error("请输入正确的邮箱"))},e=function(t,e,n){""===e?n(new Error("请输入昵称")):n()},n=function(t,e,n){""===e?n(new Error("请输入评论内容")):n()};return{ruleForm:{nickname:"",email:"",content:""},rules:{nickname:[{validator:e,trigger:"blur"}],email:[{validator:t,trigger:"blur"}],content:[{validator:n,trigger:"blur"}]}}},computed:u({},Object(c["d"])({userInfo:function(t){return t.user.userInfo}})),created:function(){},methods:u({},Object(c["b"])({createComments:"comments/createComments"}),{changePage:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("changeCommentsPage",e);case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),resetForm:function(t){this.$refs[t].resetFields()},showMessage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";this.$message({message:t,type:e})},submitForm:function(t){var e=this;this.$refs[t].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,e.createArticleComments();case 3:t.next=7;break;case 5:return e.showMessage("请完善表单","error"),t.abrupt("return",!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},createArticleComments:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.ruleForm,n=e.content,r=e.nickname,a=e.email,t.next=3,this.createComments({email:a,nickname:r,content:n,article_id:this.id});case 3:s=t.sent,this.$message({message:"评论成功",type:"success"}),this.resetForm("ruleForm"),i=s.data.data,this.$emit("updateComments",i);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()})},p=d,f=(n("c695"),n("2877")),h=Object(f["a"])(p,o,l,!1,null,"60e87a5b",null),b=h.exports;function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(n,!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={components:{VComments:b},data:function(){return{id:this.$route.params.id,detail:null}},created:function(){this.id?this.getArticle():this.$router.push("/article")},methods:v({},Object(c["b"])({getArticleDetail:"article/getArticleDetail",getCommentsList:"comments/getCommentsList",createComments:"comments/createComments"}),{updateComments:function(t){this.detail.comments_list.data.unshift(t)},changeCommentsPage:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getCommentsList({article_id:this.id,page:e});case 2:n=t.sent,this.detail.comments_list=n.data.data;case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getArticle:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getArticleDetail(this.id);case 2:e=t.sent,this.detail=e.data.data,document.title=this.detail.title;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()})},C=w,O=(n("1dc2"),Object(f["a"])(C,r,a,!1,null,"a2bab5b6",null));e["default"]=O.exports},c695:function(t,e,n){"use strict";var r=n("eb23"),a=n.n(r);a.a},dd20:function(t,e,n){},eb23:function(t,e,n){}}]);
//# sourceMappingURL=chunk-419dd7cf.011c70c9.js.map